$-base-gap-size: 0.25rem !default;
$-base-font-size: 16px !default;

@function strip-unit($num) {
  @return $num / ($num * 0 + 1);
}

@function gap($size) {
  @return strip-unit($size) * $-base-gap-size;
}

// ceil by multiples of gaps, always larger than $size
@function gap-ceil($size, $gap: gap(1)) {
  @return $size + $gap - ($size % $gap);
}

/// convert px, bs to rem
@function rem($num) {
  @if type-of($num) != number {
    @error "[#{$num}] is not a number";
  }

  @if $num == 0 {
    @return 0;
  }

  @if unitless($num) {
    @return $num * 1rem;
  }
  @if unit($num) == x {
    @return gap($num);
  }
  @if unit($num) == px {
    @return ($num / $-base-font-size) * 1rem;
  }
  @if unit($num) == em {
    @return $num;
  }
  @if unit($num) == rem {
    @return $num;
  }

  @error "unsupported unit [#{$size}]";
}

// @debug rem(1);
// @debug rem(1x);
// @debug rem(16px);

// convert px to em
@function em($num, $base: 16) {
  @if $num == 0 {
    @return 0;
  }
  @if unit($num) == unit($base) {
    @return $num / $base * 1em;
  }
  @error "type mismatch: [#{$num}] & [#{$base}]";
}
